<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.vchat.vchat.mapper.UserMapper">
    <resultMap id="userResult" type="com.demo.vchat.vchat.domain.User">
        <id property="userId" column="user_id" javaType="String" jdbcType="VARCHAR"/>
        <result property="account" column="account" javaType="String" jdbcType="VARCHAR"/>
        <result property="password" column="password" javaType="VARCHAR" jdbcType="VARCHAR"/>
        <result property="userName" column="user_name" javaType="VARCHAR" jdbcType="VARCHAR"/>
        <result property="userAge" column="user_age" javaType="INTEGER" jdbcType="INTEGER"/>
        <result property="userSex" column="user_sex" javaType="VARCHAR" jdbcType="VARCHAR"/>
        <result property="status" column="status" javaType="INTEGER" jdbcType="INTEGER"/>
        <result property="userCreateTime" column="user_create_time" javaType="java.util.Date" jdbcType="TIMESTAPE"/>
    </resultMap>

    <sql id="user_column">
        user_id,account,password,user_name,user_age,user_sex,status,user_create_time
    </sql>

    <select id="userAccount" resultType="userResult">
        SELECT
            account
        FROM
            `user`
        WHERE
            account = #{account}
    </select>

    <insert id="userRegister" useGeneratedKeys="true" keyProperty="user_id">
        INSERT INTO
            `user`
        <trim prefix="(" suffix=")" suffixOverrides=",">
            user_id,
            <if test="account != null">account</if>
            <if test="password != null">password</if>
            <if test="userName != null">user_name</if>
            <if test="userAge != null">user_age</if>
            <if test="userSex != null">user_sex</if>
            status,
            user_create_time
        </trim>
        VALUES
        <trim prefix="(" suffix=")" suffixOverrides=",">
            uuid(),
            <if test="account != null">#{account}</if>
            <if test="password != null">#{password}</if>
            <if test="userName != null">#{user_name}</if>
            <if test="userAge != null">#{user_age}</if>
            <if test="userSex != null">#{user_sex}</if>
            1,
            now()
        </trim>
    </insert>











</mapper>